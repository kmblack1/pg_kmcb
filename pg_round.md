# 小数修约函数

## 四舍五入
```sql
select round_v1(3.1414026,3),round_v1(3.1415026,3)
output 3.141  3.142
```

**格式化浮点数到指定的位数(结果类型为text)**
```sql
select round2str_v1(3.1414026,3),round2str_v1(3.1415026,3)
output 3.141  3.142
```

## 四舍六入五考虑
四舍六入五成双是一种比较精确比较科学的计数保留法，是一种数字修约规则。<br />
```sql
select round_v2(3.1414026,3),round_v2(3.1416026,3),round_v2(3.1415126,3),round_v2(3.1415026,3),round_v2(3.1425026,3)
output 3.141	3.142	3.142	3.142	3.142
```

**格式化浮点数到指定的位数(结果类型为text)**
```sql
select round2str_v2(3.141,4),round2str_v2(3.141,4),round2str_v2(3.141,4),round2str_v2(3.141,4),round2str_v2(3.142,4)
output 3.1410	3.1410	3.1410	3.1410	3.1420
```

```sql
select round_v2(3.1424,3),--当有效位数后一位的数字≤4时，其后的数字直接舍去；
	round_v2(3.1426, 3), --当有效位数后一位的数字≥6时，其后数字舍去并进1；
	round_v2(3.14251, 3), --当有效位数后一位的数字=5时，5后面一位的数字如果不等于0，则舍5进1
	round_v2(3.14250, 3), --当有效位数后一位的数字=5时，5后面一位数字如果等于0,5的前面如果是偶数，则舍5不进
	round_v2(3.14150, 3)  --当有效位数后一位的数字=5时，5后面一位数字如果等于0,5的前面如果是奇数，则舍5进1
	
select round2str_v2(3.1424,3),--当有效位数后一位的数字≤4时，其后的数字直接舍去；
	round2str_v2(3.1426, 3), --当有效位数后一位的数字≥6时，其后数字舍去并进1；
	round2str_v2(3.14251, 3), --当有效位数后一位的数字=5时，5后面一位的数字如果不等于0，则舍5进1
	round2str_v2(3.14250, 3), --当有效位数后一位的数字=5时，5后面一位数字如果等于0,5的前面如果是偶数，则舍5不进
	round2str_v2(3.14150, 3)  --当有效位数后一位的数字=5时，5后面一位数字如果等于0,5的前面如果是奇数，则舍5进1
```

**四舍六入五考虑规则**

    当有效位数后一位的数字≤4时，其后的数字直接舍去；

    当有效位数后一位的数字≥6时，其后数字舍去并进1；

    当有效位数后一位的数字=5时，要分两种情况：

        5后面一位的数字如果不等于0，则舍5进1；

        5后面一位数字如果等于0，又要分两种情况：

            5的前面如果是奇数，则舍5进1

            5的前面如果是偶数，则舍5不进
